---
import Layout from '../layouts/Layout.astro';
import { projects } from '../data/projects';
import { getCollection, type CollectionEntry } from 'astro:content';

const allPosts = await getCollection('blog', ({ data }: CollectionEntry<'blog'>) => {
  return data.draft !== true;
});

const technicalPosts = allPosts
  .filter(post => post.data.category === 'technical')
  .sort((a, b) => b.data.pubDatetime.getTime() - a.data.pubDatetime.getTime())
  .slice(0, 2);

const essayPosts = allPosts
  .filter(post => post.data.category === 'essay')
  .sort((a, b) => b.data.pubDatetime.getTime() - a.data.pubDatetime.getTime())
  .slice(0, 2);

const limitedProjects = projects.slice(0, 2);
---

<Layout title="Atharv Parlikar">
	<main class="max-w-xl mx-auto px-6 py-16 md:py-24">
		
		<header class="mb-16">
			<h1 class="text-2xl font-normal mb-4 text-neutral-900">Atharv Parlikar</h1>
			<p class="text-neutral-700 leading-relaxed mb-6">
				Building real-time infrastructure and developer tools. I care about type safety, clean abstractions, and making WebSockets not suck. Writing Rust and TypeScript.
			</p>
			<div class="flex gap-4 text-[15px]">
				<a href="https://github.com/atharvparlikar" class="text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">GitHub</a>
				<a href="https://twitter.com/atharvparlikar1" class="text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">Twitter</a>
				<a href="mailto:atharvparlikar@gmail.com" class="text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">Email</a>
			</div>
		</header>

		<section class="mb-16">
			<div class="flex items-baseline justify-between mb-6">
				<h2 class="text-lg font-normal text-neutral-900">Projects</h2>
				<a href="/projects" class="text-[15px] text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">View all</a>
			</div>
			<div class="space-y-8">
				{limitedProjects.map((project) => (
					<div>
						<div class="flex items-baseline justify-between mb-1">
							<h3 class="font-normal text-neutral-900">{project.title}</h3>
							<span class="text-sm text-neutral-400">{project.year}</span>
						</div>
						<p class="text-neutral-700 text-[15px] mb-2 leading-relaxed">{project.description}</p>
						<div class="flex gap-3 text-[15px]">
							{project.github && (
								<a href={project.github} class="text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">
									GitHub
								</a>
							)}
							{project.link && (
								<a href={project.link} class="text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">
									Live
								</a>
							)}
						</div>
					</div>
				))}
			</div>
		</section>

		<section class="mb-16">
			<div class="flex items-baseline justify-between mb-6">
				<h2 class="text-lg font-normal text-neutral-900">Technical Writing</h2>
				<a href="/blog?category=technical" class="text-[15px] text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">View all</a>
			</div>
			<div class="space-y-6">
				{technicalPosts.map((post: CollectionEntry<'blog'>) => (
					<a href={`/blog/${post.data.postSlug}`} class="block group">
						<div class="flex items-baseline justify-between mb-1">
							<h3 class="font-normal text-neutral-900 group-hover:text-orange-600">{post.data.title}</h3>
							<span class="text-sm text-neutral-400 whitespace-nowrap ml-4">{post.data.pubDatetime.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</span>
						</div>
						<p class="text-neutral-700 text-[15px] leading-relaxed">{post.data.description}</p>
					</a>
				))}
			</div>
		</section>

		<section>
			<div class="flex items-baseline justify-between mb-6">
				<h2 class="text-lg font-normal text-neutral-900">Essays</h2>
				<a href="/blog?category=essay" class="text-[15px] text-orange-600 hover:text-orange-700 underline decoration-1 underline-offset-2">View all</a>
			</div>
			<div class="space-y-6">
				{essayPosts.map((post: CollectionEntry<'blog'>) => (
					<a href={`/blog/${post.data.postSlug}`} class="block group">
						<div class="flex items-baseline justify-between mb-1">
							<h3 class="font-normal text-neutral-900 group-hover:text-orange-600">{post.data.title}</h3>
							<span class="text-sm text-neutral-400 whitespace-nowrap ml-4">{post.data.pubDatetime.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</span>
						</div>
						<p class="text-neutral-700 text-[15px] leading-relaxed">{post.data.description}</p>
					</a>
				))}
			</div>
		</section>

	</main>
</Layout>
