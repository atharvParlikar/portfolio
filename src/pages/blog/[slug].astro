---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.data.postSlug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
	<article class="max-w-xl mx-auto px-6 py-16 md:py-24">
		<a href="/blog" class="text-[15px] text-neutral-600 hover:text-orange-600 mb-6 inline-block">← Writing</a>
		
		<header class="mb-8">
			<h1 class="text-2xl font-normal text-neutral-900 mb-2">{post.data.title}</h1>
			<div class="flex items-center gap-3 text-sm text-neutral-500">
				<time datetime={post.data.pubDatetime.toISOString()}>
					{post.data.pubDatetime.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
				</time>
				<span>·</span>
				<span>{post.data.author}</span>
			</div>
		</header>

		<div class="prose prose-neutral prose-base">
			<Content />
		</div>
	</article>
</Layout>

<style is:global>
	.prose {
		color: #404040;
		max-width: none;
	}
	
	.prose p {
		margin-top: 1.25em;
		margin-bottom: 1.25em;
		line-height: 1.7;
		font-size: 1rem;
	}

	.prose h1 {
		font-size: 1.5rem;
		font-weight: 600;
		margin-top: 2em;
		margin-bottom: 1em;
		color: #171717;
		line-height: 1.3;
	}
	
	.prose h2 {
		font-size: 1.35rem;
		font-weight: 600;
		margin-top: 1.8em;
		margin-bottom: 0.9em;
		color: #171717;
		line-height: 1.3;
	}
	
	.prose h3 {
		font-size: 1.2rem;
		font-weight: 600;
		margin-top: 1.6em;
		margin-bottom: 0.8em;
		color: #171717;
		line-height: 1.4;
	}

	.prose h4 {
		font-size: 1.1rem;
		font-weight: 600;
		margin-top: 1.5em;
		margin-bottom: 0.75em;
		color: #171717;
		line-height: 1.4;
	}

	.prose h5,
	.prose h6 {
		font-size: 1rem;
		font-weight: 600;
		margin-top: 1.5em;
		margin-bottom: 0.75em;
		color: #171717;
		line-height: 1.4;
	}
	
	.prose strong {
		font-weight: 600;
		color: #171717;
	}
	
	.prose a {
		color: #ea580c;
		text-decoration: underline;
		text-decoration-thickness: 1px;
		text-underline-offset: 2px;
	}
	
	.prose a:hover {
		color: #c2410c;
	}

	.prose ul,
	.prose ol {
		margin-top: 1.25em;
		margin-bottom: 1.25em;
		padding-left: 1.5em;
	}

	.prose li {
		margin-top: 0.5em;
		margin-bottom: 0.5em;
		line-height: 1.7;
	}

	.prose img {
		margin-top: 2em;
		margin-bottom: 2em;
		border-radius: 4px;
	}

	.prose blockquote {
		border-left: 3px solid #e7e5e4;
		padding-left: 1em;
		margin-top: 1.5em;
		margin-bottom: 1.5em;
		font-style: italic;
		color: #525252;
	}
	
	.prose code {
		background: #f5f5f4;
		padding: 0.2em 0.4em;
		border-radius: 3px;
		font-size: 0.9em;
		font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
		color: #171717;
	}
	
	.prose pre {
		background: #fafaf9;
		border: 1px solid #e7e5e4;
		border-radius: 6px;
		padding: 1em;
		overflow-x: auto;
		margin-top: 1.5em;
		margin-bottom: 1.5em;
	}
	
	.prose pre code {
		background: none;
		padding: 0;
		border-radius: 0;
		font-size: 0.875em;
		line-height: 1.7;
	}
	
	.prose hr {
		border: none;
		border-top: 1px solid #e7e5e4;
		margin-top: 3em;
		margin-bottom: 3em;
	}
</style>

